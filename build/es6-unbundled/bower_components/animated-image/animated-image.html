<html><head><link rel="import" href="../polymer/polymer-element.html"></head><body><dom-module id="animated-image"><template><style>:host{--animation-duration:var(--kb-animation-duration, 15s);--animation-count:var(--kb-animation-count, 1);--scale-start:var(--kb-scale-start, 1);--scale-end:var(--kb-scale-end, 1);--translate-x-start:var(--kb-translate-x-start, 0px);--translate-y-start:var(--kb-translate-y-start,0px);--translate-x-end:var(--kb-translate-x-end, 0px);--translate-y-end:var(--kb-translate-y-end, 0px);--opacity-start:var(--kb-opacity-start, 0);--animation-fill-mode:var(--kb-animation-fill-mode,none);--animation-timing-function:var(--kb-animation-timing-function,ease-in);--opacity-end:var(--kb-opacity-end, 1);--viewport-width:var(--kb-viewport-width, auto);--viewport-height:var(--kb-viewport-height, auto);}.imgContainer{display:block;background-color:var(--kb-background-color, inherit);will-change:transform;overflow:hidden;border:2px black;width:var(--viewport-width);height:var(--viewport-height);}.run-animation{animation:kenburns var(--animation-duration) var(--animation-timing-function) var(--animation-count) var(--animation-fill-mode);}@keyframes kenburns{0%{transform:scale(var(--scale-start), var(--scale-start)) translate(var(--translate-x-start),var(--translate-y-start));opacity:var(--opacity-start);}10%{opacity:1;animation-timing-function:var(--animation-timing-function);}95%{transform:scale(var(--scale-end), var(--scale-end)) translate(var(--translate-x-end), var(--translate-y-end));animation-timing-function:var(--animation-timing-function);opacity:1;}100%{transform:scale(var(--scale-end), var(--scale-end)) translate(var(--translate-x-end), var(--translate-y-end));opacity:var(--opacity-end);}}</style><div class="imgContainer" id="imageContainer"><img id="kbImg" src="{{source}}"></div></template><script>class AnimatedImage extends Polymer.Element{static get is(){return'animated-image'}static get properties(){return{source:{type:String,value:null,observer:'_sourceChanged'},viewportWidth:{type:String,value:null,observer:'_widthChanged'},viewportHeight:{type:String,value:null,observer:'_heightChanged'},animationDuration:{type:String,value:null,observer:'_durationChanged'},animationFillMode:{type:String,value:null,observer:'_animationFillModeChanged'},animationTimingFunction:{type:String,value:null,observer:'_animationTimingFunctionChanged'},animationCount:{type:String,value:null,observer:'_countChanged'},scaleStart:{type:Number,value:null,observer:'_scaleStartChanged'},scaleEnd:{type:Number,value:null,observer:'_scaleEndChanged'},translateXStart:{type:String,value:null,observer:'_xStartChanged'},translateXEnd:{type:String,value:null,observer:'_xEndChanged'},translateYStart:{type:String,value:null,observer:'_yStartChanged'},translateYEnd:{type:String,value:null,observer:'_yEndChanged'},opacityStart:{type:Number,value:null,observer:'_opacityStartChanged'},opacityEnd:{type:Number,value:null,observer:'_opacityEndChanged'}}}connectedCallback(){super.connectedCallback();for(var a=['webkit','moz','MS','o',''],b=this.$.kbImg,c='AnimationIteration',d=this,e=0;e<a.length;e++)a[e]||(c=c.toLowerCase()),b.addEventListener(a[e]+c,function(){d.dispatchEvent(new CustomEvent('kb-animation-iteration',{image:d.source}))},!1);this._sourceChanged()}_sourceChanged(){this.source&&this._updateAnimation()}changeStyle(a){this.updateStyles(a)}_updateAnimation(){var a=this.$.kbImg;a.classList.toggle('run-animation',!1),a.classList.toggle('run-animation',!0)}start(){var a=this.$.kbImg;a.classList.toggle('run-animation',!0)}stop(){var a=this.$.kbImg;a.classList.toggle('run-animation',!1)}_widthChanged(){if(null!==this.viewportWidth){var a=isNaN(this.viewportWidth)?this.viewportWidth:this.viewportWidth+'px';this.changeStyle({"--viewport-width":a})}}_heightChanged(){if(null!==this.viewportHeight){var a=isNaN(this.viewportHeight)?this.viewportHeight:this.viewportHeight+'px';this.changeStyle({"--viewport-height":a})}}_durationChanged(){if(null!==this.animationDuration){var a=isNaN(this.animationDuration)?this.animationDuration:this.animationDuration+'s';this.changeStyle({"--animation-duration":a})}}_animationFillModeChanged(){if(null!==this.animationFillMode){var a=this.animationFillMode.toString();this.changeStyle({"--animation-fill-mode":a})}}_animationTimingFunctionChanged(){if(null!==this.animationTimingFunction){var a=this.animationTimingFunction.toString();this.changeStyle({"--animation-timing-function":a})}}_countChanged(){if(null!==this.animationCount){var a=isNaN(this.animationCount)?this.animationCount:this.animationCount.toString();this.changeStyle({"--animation-count":a})}}_scaleStartChanged(){if(null!==this.scaleStart&&!isNaN(this.scaleStart)){var a=this.scaleStart.toString();this.changeStyle({"--scale-start":a})}}_scaleEndChanged(){if(null!==this.scaleEnd&&!isNaN(this.scaleEnd)){var a=this.scaleEnd.toString();this.changeStyle({"--scale-end":a})}}_xStartChanged(){if(null!==this.translateXStart){var a=isNaN(this.translateXStart)?this.translateXStart:this.translateXStart+'px';this.changeStyle({"--translate-x-start":a})}}_xEndChanged(){if(null!==this.translateXEnd){var a=isNaN(this.translateXEnd)?this.translateXEnd:this.translateXEnd+'px';this.changeStyle({"--translate-x-end":a})}}_yStartChanged(){if(null!==this.translateYStart){var a=isNaN(this.translateYStart)?this.translateYStart:this.translateYStart+'px';this.changeStyle({"--translate-y-start":a})}}_yEndChanged(){if(null!==this.translateYEnd){var a=isNaN(this.translateYEnd)?this.translateYEnd:this.translateYEnd+'px';this.changeStyle({"--translate-y-end":a})}}_opacityStartChanged(){if(null!==this.opacityStart&&!isNaN(this.opacityStart)){var a=this.opacityStart.toString();this.changeStyle({"--opacity-start":a})}}_opacityEndChanged(){if(null!==this.opacityEnd&&!isNaN(this.opacityEnd)){var a=this.opacityEnd.toString();this.changeStyle({"--opacity-end":a})}}}window.customElements.define(AnimatedImage.is,AnimatedImage);</script></dom-module></body></html>